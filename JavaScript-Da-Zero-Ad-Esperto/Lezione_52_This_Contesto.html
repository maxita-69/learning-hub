<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lezione 52 - this: Contesto Globale e Oggetti</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; color: #333; background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background-color: white; padding: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 8px; }
        header { border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 2.5em; color: #2c3e50; margin-bottom: 10px; }
        .subtitle { font-size: 1.1em; color: #7f8c8d; font-style: italic; }
        h2 { font-size: 1.8em; color: #2c3e50; margin-top: 40px; margin-bottom: 20px; border-left: 4px solid #3498db; padding-left: 15px; }
        h3 { font-size: 1.3em; color: #34495e; margin-top: 25px; margin-bottom: 15px; }
        h4 { font-size: 1.1em; color: #34495e; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; text-align: justify; }
        .code-block { background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; margin: 20px 0; overflow-x: auto; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; border-left: 4px solid #3498db; }
        .code-block pre { margin: 0; white-space: pre; }
        .keyword { color: #ff79c6; }
        .function { color: #50fa7b; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; font-style: italic; }
        .inline-code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; color: #e74c3c; font-size: 0.95em; }
        .important { background-color: #d1ecf1; border-left: 4px solid #0c5460; padding: 15px; margin: 20px 0; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border: 1px solid #ddd; }
        th { background-color: #3498db; color: white; font-weight: bold; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        ul, ol { margin-left: 30px; margin-bottom: 15px; }
        li { margin-bottom: 10px; }
        footer { margin-top: 50px; padding-top: 20px; border-top: 2px solid #ecf0f1; text-align: center; color: #95a5a6; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>this: Contesto Globale e Oggetti</h1>
            <p class="subtitle">Lezione 52 - Corso JavaScript</p>
        </header>
        <section><h2> *Definizione di this*</h2>
<p>*this √® il riferimento all'attuale contesto di esecuzione*, ovvero all'oggetto nel quale stiamo operando.</p>
<p>*‚ÑπÔ∏è NOTA IMPORTANTE: this √® un elemento riservato* di JavaScript. Non possiamo assegnare un valore a this. Non possiamo scrivere:</p>
<p>let this = 20; // ‚ùå ERRORE\!</p>
<h2> *this nel Contesto Globale*</h2>
<h3> *Creazione del Contesto Globale*</h3>
<p>La prima cosa che il motore JavaScript fa prima dell'esecuzione di qualsiasi riga del nostro codice √® creare un *contesto globale di esecuzione, ovvero un oggetto globale in cui tutto il nostro codice viene eseguito, e fa s√¨ che this sia un riferimento a window*.</p>
<p>Infatti, se facciamo:</p>
<p>console.log(this);</p>
<p>// Output: Window {window: Window, self: Window, document: document, ...}</p>
<p>Abbiamo che √® un riferimento all'oggetto window.</p>
<h3> *this all'Interno di una Funzione nel Contesto Globale*</h3>
<p>Definiamo una funzione test:</p>
<p>function test() {</p>
<p>console.log(this);</p>
<p>}</p>
<p>Invochiamo la funzione test dal contesto globale:</p>
<p>test();</p>
<p>// Output: Window {...}</p>
<p>Vediamo this all'interno della funzione test. A che cosa fa riferimento? Fa riferimento ancora all'oggetto *window*.</p>
<h2> *this nel Contesto di un Oggetto*</h2>
<p>Nel contesto di un oggetto da noi creato *le cose cambiano*.</p>
<h3> *Binding Implicito*</h3>
<p>Definiamo un oggetto obj con una propriet√† fn che mantiene il riferimento ad una funzione, e all'interno della funzione facciamo console.log di this:</p>
<p>const obj = {</p>
<p>fn: function() {</p>
<p>console.log(this);</p>
<p>}</p>
<p>};</p>
<p>Invochiamo la funzione con *binding implicito, ovvero nome oggetto punto nome metodo*:</p>
<p>obj.fn();</p>
<p>// Output: {fn: ∆í}</p>
<p>Vediamo che this all'interno di questa funzione *non √® pi√π un riferimento a window* ma √® un riferimento all'oggetto obj, proprio perch√© questa funzione opera all'interno dell'oggetto obj.</p>
<h3> *Accesso alle Propriet√† tramite this*</h3>
<p>Infatti, definiamo una propriet√† p1 con valore 30:</p>
<p>const obj = {</p>
<p>p1: 30,</p>
<p>fn: function() {</p>
<p>console.log(this.p1);</p>
<p>}</p>
<p>};</p>
<p>obj.fn();</p>
<p>// Output: 30</p>
<p>Se facciamo this.p1 riusciamo ad accedere correttamente alla propriet√† p1 dell'oggetto obj, proprio perch√© this √® un riferimento a obj.</p>
<h2> *Il Valore di this Dipende dall'Invocazione*</h2>
<p>Ma torniamo alla funzione test. In realt√†, *il valore di this all'interno di una funzione dipende dal modo in cui viene invocata*.</p>
<h3> *Esempio con Funzione Riutilizzata*</h3>
<p>Se la invochiamo dal contesto globale sar√† un riferimento all'oggetto globale window, ma se definiamo un oggetto obj1 con una propriet√† fn che mantiene il riferimento alla funzione test:</p>
<p>function test() {</p>
<p>console.log(this);</p>
<p>}</p>
<p>const obj1 = {</p>
<p>fn: test</p>
<p>};</p>
<p>E invochiamo la funzione fn:</p>
<p>obj1.fn();</p>
<p>// Output: {fn: ∆í}</p>
<p>Vediamo che questa volta this all'interno di test *non fa pi√π riferimento all'oggetto window* ma fa riferimento all'oggetto obj1.</p>
<h3> *Accesso alle Propriet√† dell'Oggetto Chiamante*</h3>
<p>Aggiungiamo una propriet√† p1 ad obj1 e all'interno della funzione test facciamo this.p1:</p>
<p>function test() {</p>
<p>console.log(this.p1);</p>
<p>}</p>
<p>const obj1 = {</p>
<p>p1: 20,</p>
<p>fn: test</p>
<p>};</p>
<p>obj1.fn();</p>
<p>// Output: 20</p>
<p>Accediamo correttamente al valore 20 perch√© this all'interno di test, invocato tramite obj1, fa riferimento proprio all'oggetto obj1.</p>
<h3> *Stesso Metodo, Oggetti Diversi*</h3>
<p>Possiamo anche avere un oggetto obj2 con propriet√† p1 ma con valore 40:</p>
<p>const obj2 = {</p>
<p>p1: 40,</p>
<p>fn: test</p>
<p>};</p>
<p>obj2.fn();</p>
<p>// Output: 40</p>
<p>Abbiamo correttamente l'accesso alla propriet√† p1 dell'oggetto obj2.</p>
<p>*üìå CONCLUSIONE: Il valore di this all'interno di una funzione varia in base a come viene invocata la funzione stessa*.</p>
<p># *Approfondimenti e Note Integrative*</p></section>
        <footer>
            <p><strong>Corso:</strong> JavaScript - Da Zero ad Esperto</p>
            <p><strong>Lezione:</strong> 52 - this: Contesto Globale e Oggetti</p>
        </footer>
    </div>
</body>
</html>