<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lezione 49 - __proto__ e Accesso Prototipi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; color: #333; background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background-color: white; padding: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 8px; }
        header { border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 2.5em; color: #2c3e50; margin-bottom: 10px; }
        .subtitle { font-size: 1.1em; color: #7f8c8d; font-style: italic; }
        h2 { font-size: 1.8em; color: #2c3e50; margin-top: 40px; margin-bottom: 20px; border-left: 4px solid #3498db; padding-left: 15px; }
        h3 { font-size: 1.3em; color: #34495e; margin-top: 25px; margin-bottom: 15px; }
        h4 { font-size: 1.1em; color: #34495e; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; text-align: justify; }
        .code-block { background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; margin: 20px 0; overflow-x: auto; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; border-left: 4px solid #3498db; }
        .code-block pre { margin: 0; white-space: pre; }
        .keyword { color: #ff79c6; }
        .function { color: #50fa7b; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; font-style: italic; }
        .inline-code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; color: #e74c3c; font-size: 0.95em; }
        .important { background-color: #d1ecf1; border-left: 4px solid #0c5460; padding: 15px; margin: 20px 0; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border: 1px solid #ddd; }
        th { background-color: #3498db; color: white; font-weight: bold; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        ul, ol { margin-left: 30px; margin-bottom: 15px; }
        li { margin-bottom: 10px; }
        footer { margin-top: 50px; padding-top: 20px; border-top: 2px solid #ecf0f1; text-align: center; color: #95a5a6; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>__proto__ e Accesso Prototipi</h1>
            <p class="subtitle">Lezione 49 - Corso JavaScript</p>
        </header>
        <section><h2> *La Proprietà __proto__*</h2>
<p>*⚠️ ATTENZIONE: La proprietà __proto__ è deprecata*. Non va utilizzata nel codice di produzione, ma solo per test e debugging. Per accedere al prototipo di un oggetto in modo standard, utilizzare Object.getPrototypeOf().</p>
<p>Possiamo risalire la catena dei prototipi attraverso una proprietà: la proprietà *__proto__*.</p>
<p>__proto__ è il riferimento di un oggetto al suo prototipo. È una proprietà deprecata, quindi non va utilizzata se non come test.</p>
<h3> *Esempio con Oggetto Letterale*</h3>
<p>Definiamo un oggetto letterale:</p>
<p>const obj = {};</p>
<p>Noi sappiamo che quando definiamo un oggetto letterale, internamente JavaScript esegue new Object().</p>
<p>Facciamo:</p>
<p>console.log(Object);</p>
<p>Abbiamo una funzione, ma sappiamo che le funzioni sono oggetti. Espandiamo e vediamo tutta una serie di proprietà, tra cui la proprietà prototype che contiene un oggetto.</p>
<h3> *Accesso al Prototipo tramite __proto__*</h3>
<p>Per conoscere il prototipo di obj, facciamo semplicemente:</p>
<p>obj.__proto__</p>
<p>Con due underscore iniziali e due underscore finali. Abbiamo che obj.__proto__ si riferisce proprio all'oggetto contenuto in Object.prototype.</p>
<p>Possiamo fare il confronto di uguaglianza:</p>
<p>obj.__proto__ === Object.prototype</p>
<p>// Output: true</p>
<h2> *Esempio con Constructor Function*</h2>
<h3> *Definizione della Constructor Function*</h3>
<p>Definiamo una Constructor Function:</p>
<p>function Ferrari() {</p>
<p>// corpo della funzione</p>
<p>}</p>
<p>Ferrari.prototype.Marchio = "Ferrari";</p>
<p>Aggiungiamo una proprietà all'oggetto contenuto in Ferrari.prototype. Facciamo:</p>
<p>console.log(Ferrari);</p>
<p>Vediamo che abbiamo la proprietà prototype che contiene un oggetto con una proprietà: la proprietà Marchio che abbiamo aggiunto noi.</p>
<h3> *Creazione di un Oggetto dalla Constructor Function*</h3>
<p>Creiamo un oggetto Ferrari458 dalla Constructor Function Ferrari:</p>
<p>const Ferrari458 = new Ferrari();</p>
<h3> *Verifica del Prototipo*</h3>
<p>Vediamo chi è il prototipo di Ferrari458 utilizzando la proprietà __proto__:</p>
<p>console.log(Ferrari458.__proto__);</p>
<p>Il prototipo di Ferrari458 è proprio l'oggetto contenuto in Ferrari.prototype. Infatti possiamo fare il confronto di uguaglianza:</p>
<p>Ferrari458.__proto__ === Ferrari.prototype</p>
<p>// Output: true</p>
<h2> *Risalita Completa della Catena dei Prototipi*</h2>
<p>A partire da un qualsiasi oggetto possiamo risalire la catena dei prototipi in questo modo.</p>
<h3> *Primo Livello di Risalita*</h3>
<p>Abbiamo visto che il prototipo di Ferrari458 è l'oggetto Ferrari.prototype, ma risaliamo la catena concatenando ancora __proto__:</p>
<p>console.log(Ferrari458.__proto__.__proto__);</p>
<p>Siamo risaliti in Object.prototype. Vediamo chi è il prototipo di Object.prototype, quindi facciamo ancora .__proto__:</p>
<p>console.log(Ferrari458.__proto__.__proto__.__proto__);</p>
<p>// Output: null</p>
<p>Abbiamo correttamente null.</p>
<h2> *Esempio Avanzato: Catena a Tre Livelli*</h2>
<h3> *Creazione con Object.create()*</h3>
<p>Definiamo un oggetto Ferrari458Special e vogliamo che il prototipo sia Ferrari458. Utilizziamo il metodo create() passando in input l'oggetto che vogliamo sia il prototipo del nuovo oggetto:</p>
<p>const Ferrari458Special = Object.create(Ferrari458);</p>
<h3> *Verifica del Prototipo*</h3>
<p>console.log(Ferrari458Special.__proto__ === Ferrari458);</p>
<p>// Output: true</p>
<p>Vediamo che corrisponde proprio all'oggetto Ferrari458.</p>
<h3> *Risalita Completa della Catena*</h3>
<p>Proviamo a risalire la catena:</p>
<p>// Primo livello: prototipo di Ferrari458Special</p>
<p>console.log(Ferrari458Special.__proto__);</p>
<p>// Output: Ferrari458 (oggetto)</p>
<p>// Secondo livello: prototipo di Ferrari458</p>
<p>console.log(Ferrari458Special.__proto__.__proto__);</p>
<p>// Output: Ferrari.prototype (oggetto)</p>
<p>// Terzo livello: Object.prototype</p>
<p>console.log(Ferrari458Special.__proto__.__proto__.__proto__);</p>
<p>// Output: Object.prototype</p>
<p>// Quarto livello: null</p>
<p>console.log(Ferrari458Special.__proto__.__proto__.__proto__.__proto__);</p>
<p>// Output: null</p>
<h3> *Spiegazione della Risalita*</h3>
<ul><li>*Con il primo __proto__*: siamo risaliti al prototipo di Ferrari458Special, che è l'oggetto Ferrari458</li><li>*Con il secondo __proto__*: siamo risaliti al prototipo di Ferrari458, che è l'oggetto contenuto in Ferrari.prototype</li><li>*Con il terzo __proto__*: risaliamo in Object.prototype</li><li>*Con il quarto __proto__*: risaliamo ancora e siamo risaliti fino a null</li></ul>
<h2> *Conclusione: Il Collegamento tra Oggetti*</h2>
<p>Come possiamo notare, *tutti gli oggetti che sono all'interno della catena sono in qualche modo collegati tra loro. Questo consente al motore JavaScript, quando noi ricerchiamo una proprietà (ad esempio sull'oggetto Ferrari458Special), di ricercarla non solo sull'oggetto Ferrari458Special ma in tutta la catena dei prototipi*.</p>
<p>Questo meccanismo è fondamentale per comprendere come funziona l'ereditarietà in JavaScript e come gli oggetti possano condividere funzionalità senza duplicazione di codice.</p>
<p># *Approfondimenti e Note Integrative*</p></section>
        <footer>
            <p><strong>Corso:</strong> JavaScript - Da Zero ad Esperto</p>
            <p><strong>Lezione:</strong> 49 - __proto__ e Accesso Prototipi</p>
        </footer>
    </div>
</body>
</html>