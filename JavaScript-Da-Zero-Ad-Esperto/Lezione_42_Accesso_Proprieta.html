<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lezione 42 - Accesso Propriet√† Oggetti</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; color: #333; background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background-color: white; padding: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 8px; }
        header { border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 2.5em; color: #2c3e50; margin-bottom: 10px; }
        .subtitle { font-size: 1.1em; color: #7f8c8d; font-style: italic; }
        h2 { font-size: 1.8em; color: #2c3e50; margin-top: 40px; margin-bottom: 20px; border-left: 4px solid #3498db; padding-left: 15px; }
        h3 { font-size: 1.3em; color: #34495e; margin-top: 25px; margin-bottom: 15px; }
        h4 { font-size: 1.1em; color: #34495e; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; text-align: justify; }
        .code-block { background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; margin: 20px 0; overflow-x: auto; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; border-left: 4px solid #3498db; }
        .code-block pre { margin: 0; white-space: pre; }
        .keyword { color: #ff79c6; }
        .function { color: #50fa7b; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; font-style: italic; }
        .inline-code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; color: #e74c3c; font-size: 0.95em; }
        .important { background-color: #d1ecf1; border-left: 4px solid #0c5460; padding: 15px; margin: 20px 0; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border: 1px solid #ddd; }
        th { background-color: #3498db; color: white; font-weight: bold; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        ul, ol { margin-left: 30px; margin-bottom: 15px; }
        li { margin-bottom: 10px; }
        footer { margin-top: 50px; padding-top: 20px; border-top: 2px solid #ecf0f1; text-align: center; color: #95a5a6; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Accesso Propriet√† Oggetti</h1>
            <p class="subtitle">Lezione 42 - Corso JavaScript</p>
        </header>
        <section><h3> *4\. Creare oggetti in JavaScript: da letterale a constructor function*</h3>
<h4> *4.1 Oggetti letterali (approccio base, ma ridondante)*</h4>
<div class="code-block"><pre>
const user1 = {  
  name: "Alice",  
  descrivimi() { console.log(\`Sono ${this.name}\`); }  
};

const user2 = {  
  name: "Bob",  
  descrivimi() { console.log(\`Sono ${this.name}\`); }  
};

const user3 = {  
  name: "Carla",  
  descrivimi() { console.log(\`Sono ${this.name}\`); }

};

‚ö†Ô∏è Problema: duplicazione del codice ‚Äî viola il principio OOP di non ridondanza.
</pre></div>
<h4> *4.2 Factory function (soluzione semplice)*</h4>
<div class="code-block"><pre>
function createUser(name) {  
  return {  
    name: name,  
    descrivimi() {  
      console.log(\`Sono ${this.name}\`);  
    }  
  };  
}

const user4 = createUser("Daniele");

user4.descrivimi();  // ‚Üí "Sono Daniele"

‚úÖ Vantaggi:

* Nessuna duplicazione  
* Sintassi chiara

‚ùå Svantaggi:

 Ogni oggetto creato ha la propria copia* del metodo descrivimi() (inefficienza in memoria se si creano migliaia di oggetti)
</pre></div>
<h4> *4.3 Constructor function (approccio OOP classico in JS pre-ES6)*</h4>
<div class="code-block"><pre>
function User(name) {  
  this.name = name;  
  this.descrivimi = function() {  
    console.log(\`Sono ${this.name}\`);  
  };  
}

// ‚ùå SBAGLIATO: dimenticato \`new\`  
const user5 = User("Elena");  // ‚Üí undefined (User non ha return esplicito)  
console.log(user5);           // ‚Üí undefined

// ‚úÖ CORRETTO: usare \`new\`  
const user6 = new User("Elena");  
console.log(user6);  // ‚Üí User { name: "Elena", descrivimi: \[Function\] }

user6.descrivimi();  // ‚Üí "Sono Elena"

üîç Cosa fa new?  
Quando si invoca una funzione con new, il motore JavaScript:

1. Crea un nuovo oggetto vuoto ({})  
2. Imposta this a puntare a quell‚Äôoggetto  
3. Esegue il corpo della funzione (che tipicamente assegna propriet√† a this)  
4. Restituisce automaticamente l‚Äôoggetto creato (salvo return esplicito con un oggetto)

‚úÖ Vantaggi della constructor function:

* Pi√π compatta della factory function (non richiede return obj)  
* Pi√π vicina al modello "classico" di OOP (base per l‚Äôintroduzione successiva delle class in ES6)
</pre></div>
<h2> *Approfondimenti e Note Integrative*</h2>
<h3> *A. Perch√© new restituisce l‚Äôoggetto automaticamente?*</h3>
<p>In JavaScript, ogni funzione pu√≤ essere usata come constructor se invocata con new. Il comportamento √® regolato dalle specifiche ECMAScript:</p>
<ul><li>Se la funzione non ha un return esplicito, oppure return restituisce un valore primitivo (stringa, numero, booleano), new ignora quel valore e restituisce l‚Äôoggetto creato.</li><li>Se la funzione ha return con un oggetto, quel valore sostituisce l‚Äôoggetto creato.</li></ul>
<div class="code-block"><pre>
function Test() {  
  this.a = 1;  
  return { b: 2 };  // ‚Üê oggetto: sostituisce l‚Äôistanza  
}

const t = new Test();

console.log(t);  // ‚Üí { b: 2 } (non { a: 1 })

‚ö†Ô∏è Questo √® un anti-pattern comune: evitare return esplicito in constructor function, a meno di casi molto specifici.
</pre></div>
<h3> *B. Factory vs Constructor: differenze fondamentali*</h3>
<p>‚úÖ In ambienti moderni (ES6+), si preferiscono le class, che sono zucchero sintattico sulle constructor function, ma con sintassi pi√π chiara e protezioni (es. class non pu√≤ essere chiamata senza new).</p>
<h3> *C. Suggerimento per sviluppatori Python (riferimento personale)*</h3>
<p>Poich√© sei un Python developer, noterai analogie con le classi Python:</p>
<p>python</p>
<p>class User:</p>
<p>def __init__(self, name):</p>
<p>self.name = name</p>
<p>def descrivimi(self):</p>
<p>print(f"Sono {self.name}")</p>
<p>La constructor function JavaScript √® l‚Äôequivalente storico di __init__.</p>
<p>Tuttavia, mentre Python ha un vero sistema di classi, JavaScript (pre-ES6) ha un sistema prototipale, dove l‚Äôereditariet√† avviene tramite la catena dei prototipi (__proto__), non tramite copia di classi.</p>
<p>In ES6, class User { ... } √® puramente sintattico: sotto il cofano, usa comunque prototipi.</p>
<h3> *D. Best practice per l‚Äôaccesso alle propriet√†*</h3>
<p>‚úÖ Preferire obj\[key\] anche per chiavi statiche se intendi enfatizzare il fatto che la chiave √® parametrizzabile (es. in loop su Object.keys()).</p>
<p>Fine del capitolo.</p>
<p>Pronto per il materiale della prossima lezione.</p>
<p>Suggerimenti per mantenere la formattazione in Google Docs:</p>
<p>1. Copia-incolla diretto: Incolla il contenuto sopra direttamente in Google Docs. La formattazione Markdown verr√† in gran parte preservata.</p>
<p>2. Blocchi di codice: Per i blocchi JavaScript (come quelli sopra), Google Docs li manterr√† con carattere a spaziatura fissa. Per assicurarti che i colori siano mantenuti, potresti:</p>
<ul><li>Copiarli da un editor come VS Code o CodePen</li><li>Utilizzare il plugin "Code Blocks" per Google Docs</li></ul>
<p>3. Formattazione manuale: Se qualche elemento non si formatta correttamente:</p>
<ul><li>Usa il formato "Testo normale" per i titoli</li><li>Applica il formato "Testo a spaziatura fissa" (Ctrl+Alt+6) per il codice</li></ul></section>
        <footer>
            <p><strong>Corso:</strong> JavaScript - Da Zero ad Esperto</p>
            <p><strong>Lezione:</strong> 42 - Accesso Propriet√† Oggetti</p>
        </footer>
    </div>
</body>
</html>