<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lezione 24 - Type Coercion - Parte 2</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; color: #333; background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background-color: white; padding: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 8px; }
        header { border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 2.5em; color: #2c3e50; margin-bottom: 10px; }
        .subtitle { font-size: 1.1em; color: #7f8c8d; font-style: italic; }
        h2 { font-size: 1.8em; color: #2c3e50; margin-top: 40px; margin-bottom: 20px; border-left: 4px solid #3498db; padding-left: 15px; }
        h3 { font-size: 1.3em; color: #34495e; margin-top: 25px; margin-bottom: 15px; }
        h4 { font-size: 1.1em; color: #34495e; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; text-align: justify; }
        .code-block { background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; margin: 20px 0; overflow-x: auto; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; border-left: 4px solid #3498db; }
        .code-block pre { margin: 0; white-space: pre; }
        .keyword { color: #ff79c6; }
        .function { color: #50fa7b; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; font-style: italic; }
        .inline-code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; color: #e74c3c; font-size: 0.95em; }
        .important { background-color: #d1ecf1; border-left: 4px solid #0c5460; padding: 15px; margin: 20px 0; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border: 1px solid #ddd; }
        th { background-color: #3498db; color: white; font-weight: bold; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        ul, ol { margin-left: 30px; margin-bottom: 15px; }
        li { margin-bottom: 10px; }
        footer { margin-top: 50px; padding-top: 20px; border-top: 2px solid #ecf0f1; text-align: center; color: #95a5a6; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Type Coercion - Parte 2</h1>
            <p class="subtitle">Lezione 24 - Corso JavaScript</p>
        </header>
        <section><h2> *1\. Tipizzazione Debole e Dinamica*</h2>
<p>JavaScript è definito come un linguaggio *debolmente tipizzato (weakly typed) o a tipizzazione dinamica*.</p>
<p>A differenza di linguaggi fortemente tipizzati (come Java o C\#), in JavaScript:</p>
<p>1. Possiamo assegnare un valore a una variabile senza specificarne il tipo a priori.</p>
<p>2. Una variabile può nascere contenendo un numero e, successivamente, essere riassegnata per contenere una stringa o un booleano.</p>
<p>Questa estrema flessibilità comporta una conseguenza fondamentale: in certe occasioni, il motore JavaScript deve operare in autonomia delle conversioni da un tipo a un altro per permettere l'esecuzione del codice. Questo processo di conversione è chiamato *Coercizione*.</p>
<h2> *2\. Tipi di Coercizione*</h2>
<p>Esistono due modalità distinte di coercizione:</p>
<h3> *A. Coercizione Esplicita (Explicit)*</h3>
<p>Avviene quando siamo noi programmatori a chiedere intenzionalmente la trasformazione di un valore.</p>
<p>Un esempio classico, già visto nelle lezioni precedenti, è l'uso del doppio punto esclamativo (\!\!) per forzare un valore al suo corrispettivo Booleano.</p>
<p>JavaScript</p>
<p>const valore = "Ciao";</p>
<p>console.log(\!\!valore); // true (Conversione esplicita a booleano)</p>
<h3> *B. Coercizione Implicita (Implicit)*</h3>
<p>È l'argomento centrale di questo capitolo. Qui la conversione è effettuata da JavaScript in automatico e "dietro le quinte".</p>
<p>Questo accade spesso quando utilizziamo operatori di confronto o aritmetici su tipi di dati diversi. Sebbene possa sembrare un comportamento imprevedibile, segue regole ben precise.</p>
<p>Affinché un confronto o un'operazione avvenga, JavaScript deve trasformare uno dei due valori affinché siano entrambi dello stesso tipo.</p>
<p>Esistono solo tre tipi di conversione possibili in JavaScript:</p>
<p>1. Conversione a *Number*</p>
<p>2. Conversione a *String*</p>
<p>3. Conversione a *Boolean*</p>
<h2> *3\. L'Operatore +: Concatenazione vs Somma*</h2>
<p>L'operatore + è unico perché può comportarsi sia come operatore aritmetico (somma) sia come operatore di stringa (concatenazione).</p>
<h3> *La Regola della Stringa*</h3>
<p>Se *almeno uno dei due operandi è una stringa, JavaScript forza anche l'altro a diventare stringa ed esegue una concatenazione*.</p>
<p>JavaScript</p>
<p>// Caso 1: Numero + Stringa</p>
<p>"3" + 10;</p>
<p>// Il numero 10 diventa stringa "10". Risultato: "310"</p>
<p>// Caso 2: Stringa + Null</p>
<p>"ciao" + null;</p>
<p>// null diventa stringa "null". Risultato: "ciaonull"</p>
<p>// Caso 3: Numero + Stringa</p>
<p>3 + "ciao";</p>
<p>// Il numero 3 diventa stringa "3". Risultato: "3ciao"</p>
<h2> *4\. La Conversione a Number (Operatori Matematici e Confronto)*</h2>
<p>Quando nessuno degli elementi è una stringa, l'operatore + tenta una conversione al tipo Number.</p>
<p>Questa regola vale anche per tutti gli altri operatori aritmetici (-, *, /) e per gli operatori di confronto (>, <, >=, <=, ==).</p>
<p>Per comprendere i risultati, dobbiamo analizzare come i tipi primitivi vengono convertiti in numeri.</p>
<h3> *Tabella di Conversione a Number*</h3>
<h3> *Esempi Pratici di Conversione Numerica*</h3>
<p>Analizziamo i casi citati applicando la tabella sopra:</p>
<p>JavaScript</p>
<p>// Caso 4: Somma con null</p>
<p>2 + null; // Risultato: 2</p>
<p>// Spiegazione: null diventa 0\. (2 + 0 = 2\)</p>
<p>// Caso 5: Somma con true</p>
<p>true + null; // Risultato: 1</p>
<p>// Spiegazione: true diventa 1, null diventa 0\. (1 + 0 = 1\)</p>
<p>// Caso 6: Somma con false</p>
<p>false + null; // Risultato: 0</p>
<p>// Spiegazione: false diventa 0, null diventa 0\. (0 + 0 = 0\)</p>
<p>// Caso 7: Uguaglianza debole</p>
<p>"30" == 30; // Risultato: true</p>
<p>// Spiegazione: la stringa "30" viene convertita nel numero 30\.</p>
<p>// Caso 8: Confronto con caratteri speciali</p>
<p>3 > " 2 \\t\\n"; // Risultato: true</p>
<p>// Spiegazione: la stringa viene pulita dai caratteri di tabulazione (\\t)</p>
<p>// e a capo (\\n), diventando il numero 2\. (3 > 2 è true).</p>
<h2> *5\. Eccezioni e Casi Speciali (Edge Cases)*</h2>
<p>Ci sono situazioni particolari ("Edge Cases") che violano le regole generali di conversione numerica, specialmente con l'operatore di uguaglianza debole (==).</p>
<h3> *L'Eccezione di null e undefined*</h3>
<p>Abbiamo visto che matematicamente null diventa 0 (es. 2 + null = 2). Tuttavia, *nell'uguaglianza debole, questa conversione non avviene.*</p>
<p>*Regola:* In un confronto ==, null e undefined sono uguali tra loro, ma non sono uguali a nient'altro (nemmeno a 0 o false).</p>
<p>JavaScript</p>
<p>// Comportamento Aritmetico (Coercizione attiva)</p>
<p>2 + null;     // 2 (Qui null vale 0\)</p>
<p>// Comportamento Uguaglianza (Eccezione\!)</p>
<p>null == 0;    // false (Qui null NON viene convertito a 0\)</p>
<p>null == null;      // true</p>
<p>null == undefined; // true</p>
<h3> *L'Eccezione di NaN*</h3>
<p>NaN (Not a Number) è un valore sentinella che indica un calcolo fallito. Ha una proprietà unica:</p>
<p>*Regola: NaN non è mai uguale a nulla, nemmeno a se stesso*.</p>
<p>JavaScript</p>
<p>const valoreErrato = "stringa" * 10; // Genera NaN</p>
<p>valoreErrato == NaN; // false</p>
<p>NaN == NaN;          // false</p></section>
        <footer>
            <p><strong>Corso:</strong> JavaScript - Da Zero ad Esperto</p>
            <p><strong>Lezione:</strong> 24 - Type Coercion - Parte 2</p>
        </footer>
    </div>
</body>
</html>